#!/bin/bash

export BCM_PROJECT_DIR="$BCM_GIT_DIR/project"
export BCM_LXD_OPS="$BCM_PROJECT_DIR/shared"
export BCM_STACKS_DIR="$BCM_PROJECT_DIR/stacks"

# todo, make last digit ++ from latest git tag.

# see README.md for versioning scheme.
export BCM_VERSION="v0.0.0.2"
export BCM_DOCKER_BASE_TAG="bionic"
export BCM_RUNTIME_DIR="$HOME/.bcm"

export BCM_SSH_DIR="$BCM_RUNTIME_DIR/ssh"
export ELECTRUM_DIR="$BCM_RUNTIME_DIR/electrum"
export BCM_WORKING_DIR="$BCM_RUNTIME_DIR/clusters"

GNUPGHOME="$BCM_RUNTIME_DIR/gnupg"
PASSWORD_STORE_DIR="$BCM_RUNTIME_DIR/password_store"

# when the user sets this to 1, we will use their ~/.gnupg and ~/.ssh and ~/.password_store directories
# instead of the BCM defaults under BCM_RUNTIME_DIR
if [[ $BCM_ACTIVE == 0 ]]; then
    GNUPGHOME="$HOME/.gnupg"
    PASSWORD_STORE_DIR="$HOME/.password_store"
    BCM_SSH_DIR="$HOME/.ssh"
    ELECTRUM_DIR="$HOME/.electrum"
fi

export GNUPGHOME="$GNUPGHOME"
export PASSWORD_STORE_DIR="$PASSWORD_STORE_DIR"
export ELECTRUM_DIR="$ELECTRUM_DIR"
export LXC_BCM_BASE_IMAGE_NAME="bcm-template-$BCM_VERSION"
export BCM_GATEWAY_HOST_NAME="$(echo bcm-gateway-$BCM_VERSION-01 | tr '.' '-')"
export BCM_KAFKA_HOST_NAME="$(echo bcm-kafka-$BCM_VERSION-01 | tr '.' '-')"
export BCM_UI_HOST_NAME="$(echo bcm-ui-$BCM_VERSION-01 | tr '.' '-')"
export BCM_BITCOIN_HOST_NAME="$(echo bcm-bitcoin-$BCM_VERSION-01 | tr '.' '-')"
export BCM_PRIVATE_REGISTRY="$BCM_GATEWAY_HOST_NAME:5010"
export BCM_KNOWN_HOSTS_FILE="$BCM_SSH_DIR/known_hosts"


 
if [ -z ${BCM_DOCKER_IMAGE_CACHE+x} ]; then
    BCM_DOCKER_IMAGE_CACHE="registry-1.docker.io"
fi
export BCM_DOCKER_IMAGE_CACHE="$BCM_DOCKER_IMAGE_CACHE"

if [ -z ${BCM_LXD_IMAGE_CACHE+x} ]; then
    BCM_LXD_IMAGE_CACHE="images"
fi
export BCM_LXD_IMAGE_CACHE="$BCM_LXD_IMAGE_CACHE"

if [ -z ${BCM_DEFAULT_CHAIN+x} ]; then
    BCM_DEFAULT_CHAIN="testnet"
fi
export BCM_DEFAULT_CHAIN="$BCM_DEFAULT_CHAIN"